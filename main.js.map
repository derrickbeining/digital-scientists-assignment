{"version":3,"sources":["webpack:///webpack/bootstrap e65523115eae1092b96b","webpack:///./src/mediaDevice.js","webpack:///./src/Component.js","webpack:///./src/index.js","webpack:///./src/components/ButtonCameraPermission.js","webpack:///./src/components/CameraScreen.js"],"names":["hasMediaDeviceAPI","startingCamera","Boolean","navigator","mediaDevices","getUserMedia","generateConstraints","supportedConstraints","getSupportedConstraints","hasOwnProperty","video","facingMode","then","srcObject","mediaStream","onloadedmetadata","e","play","catch","console","warn","err","name","message","merge","one","two","Object","assign","Component","id","defaultState","state","getState","setState","arg","renderer","dom","document","getElementById","noop","classname","classList","add","remove","toggle","event","eventHandler","addEventListener","fn","ButtonCameraPermission","permitted","on","evt","show","render","log","CameraScreen","addClass","removeClass"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e65523115eae1092b96b","export function hasMediaDeviceAPI () {\n  return Boolean(navigator.mediaDevices)\n    && Boolean(navigator.mediaDevices.getUserMedia);\n}\n\nfunction generateConstraints() {\n  const supportedConstraints = navigator.mediaDevices.getSupportedConstraints();\n  if (supportedConstraints.hasOwnProperty('facingMode')) {\n    return {video: { facingMode: 'environment' }};\n  } else {\n    return { video: true };\n  }\n}\n\nexport function startingCamera (video) {\n  return navigator.mediaDevices\n    .getUserMedia(generateConstraints())\n    .then(mediaStream => {\n      video.srcObject = mediaStream;\n      video.onloadedmetadata = function(e) {\n        video.play();\n      };\n    })\n    .catch(err => console.warn(`${err.name}: ${err.message}`));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediaDevice.js","\nfunction merge(one, two) {\n  return Object.assign({}, one, two);\n}\n\nexport default class Component {\n\n  constructor(id, defaultState = {}) {\n\n    let state = defaultState;\n\n    const getState = () => state;\n\n    const setState = arg => {\n      if (typeof arg === 'function') {\n        setState(arg(getState()));\n      } else {\n        state = merge(state, arg);\n        this.renderer(getState())\n      }\n    }\n\n    this.dom = document.getElementById(id);\n    this.getState = getState;\n    this.setState = setState;\n    this.renderer = function noop() { };\n  }\n\n  addClass(classname) {\n    this.dom.classList.add(classname);\n  }\n\n  removeClass(classname) {\n    this.dom.classList.remove(classname);\n  }\n\n  toggleClass(classname) {\n    this.dom.classList.toggle(classname);\n  }\n\n  on(event, eventHandler) {\n    return this.dom.addEventListener(event, eventHandler);\n  }\n\n  render(fn) {\n    this.renderer = fn;\n    fn(this.getState());\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Component.js","import initializeCamera from './mediaDevice';\nimport ButtonCameraPermission from './components/ButtonCameraPermission';\n// initializeCamera();\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Component from '../Component';\nimport CameraScreen from './CameraScreen';\n\nconst ButtonCameraPermission = new Component('ButtonCameraPermission', {\n  permitted: false\n});\n\nButtonCameraPermission.on('click', function(evt) {\n  CameraScreen.setState({show: true});\n})\n\nButtonCameraPermission.render((state) => {\n  console.log(state.permitted);\n\n})\n\nexport default ButtonCameraPermission;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ButtonCameraPermission.js","import Component from '../Component';\nimport {hasMediaDeviceAPI, startingCamera} from '../mediaDevice';\n\nconst CameraScreen = new Component('CameraScreen', {\n  show: false\n})\n\nCameraScreen.render((state) => {\n  if (CameraScreen.getState().show) {\n    if (hasMediaDeviceAPI()) {\n      startingCamera(CameraScreen.dom)\n        .then(() => CameraScreen.addClass('camera__screen--show'))\n    }\n\n  } else {\n    CameraScreen.removeClass('camera__screen--show');\n  }\n})\n\nexport default CameraScreen;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CameraScreen.js"],"sourceRoot":""}